let moneyWidget=null,moneyInitBaseUrl=null,moneyHasArticle=1,moneyInitSource=null,moneyInitLayout="",moneyInitialResult=null,moneyPersonalLoanAmount=null,moneyMortgageLoanAmount=null,moneyPurchasePrice=null,moneyDefaultTab=null;const scripts=[],styles=[],preconnects=[],promises=[];function loadScript(e){return new Promise(((n,t)=>{const o=document.createElement("script");o.src=e,o.async=!1,o.onload=()=>{n(e)},o.onerror=()=>{t(e)},document.body.appendChild(o)}))}function loadPreconnect(e,n=!0){const t=document.getElementsByTagName("head")[0],o=document.createElement("link");o.rel="preconnect",o.href=e,n&&o.setAttribute("crossorigin",""),t.appendChild(o)}function loadStyle(e,n=!1){return new Promise(((t,o)=>{const a=document.getElementsByTagName("head")[0];if(n){const n=document.createElement("link");n.href=e,n.rel="preload",n.as="style",a.appendChild(n)}const s=document.createElement("link");s.href=e,s.rel="stylesheet",s.type="text/css",s.media="all",s.onload=()=>{t(e)},s.onerror=()=>{o(e)},a.appendChild(s)}))}function actualScreenSize(){return[{name:"mobil",query:"only screen and (max-width: 600px)"},{name:"tab",query:"only screen and (max-width: 1024px)"},{name:"képernyő",query:"only screen and (min-width: 1025px)"}].find((e=>window.matchMedia(e.query).matches)).name||""}function loadMoneyCalculatorWidget(){moneyWidget.style.display="none",moneyInitBaseUrl.includes("money")||(moneyInitBaseUrl="https://www.money.hu");const e=new XMLHttpRequest,{clickTag:n=null}=getAdOceanParams(),t={actual_screen_size:actualScreenSize(),article:moneyHasArticle,baseUrl:moneyInitBaseUrl,defaultTab:moneyDefaultTab,source:moneyInitSource,layout:moneyInitLayout,personalLoanAmount:moneyPersonalLoanAmount,mortgageLoanAmount:moneyMortgageLoanAmount,purchasePrice:moneyPurchasePrice,markup:1,adOceanUrl:n},o=new URLSearchParams;Object.keys(t).forEach((e=>{o.set(e,t[e])})),e.open("GET",`${moneyInitBaseUrl}/api/v2/calculator-widget?${o.toString()}`,!0),e.withCredentials=!0,e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){const{data:e}=JSON.parse(this.response);moneyInitialResult=e,moneyWidget.innerHTML=e.widget;moneyWidget.querySelector('link[rel="stylesheet"][title="moneyWidget"]').addEventListener("load",(()=>{moneyWidget.style.removeProperty("display")}),{once:!0,passive:!0}),initMoneyWidget()}else 4===this.readyState&&(moneyWidget.style.display="none")}}function moneyWidgetWrapperAppeared(){const{bottom:e,top:n}=moneyWidget.getBoundingClientRect();n+.2*(e-n)<window.innerHeight&&e>=0&&(loadMoneyCalculatorWidget(),window.removeEventListener("scroll",moneyWidgetWrapperAppeared,{passive:!0}))}function loadMoneyCalculatorWidgetAssets(){if(moneyWidget=document.getElementById("money-widget"),!moneyWidget||window.moneyAssetsLoadedOnce||!URLSearchParams)return;window.moneyAssetsLoadedOnce=!0;let{article:e,baseUrl:n="https://www.money.hu",layout:t="",manifest:o,mortgageLoanAmount:a=null,personalLoanAmount:s=null,purchasePrice:r=null,source:l=null,defaultLoanPurpose:i=null}=moneyWidget&&moneyWidget.dataset||[];"index"===l&&(moneyWidget.style.width="100%");const c="false"!==o;n.includes("money")||(n="https://www.money.hu"),moneyInitBaseUrl=n,moneyInitSource=l,moneyInitLayout=t,moneyPersonalLoanAmount=s,moneyMortgageLoanAmount=a,moneyPurchasePrice=r,moneyDefaultTab=i,moneyHasArticle="no-article"!==e,scripts.push(`${moneyInitBaseUrl}/assets-new/js/calculator-widget.js`),preconnects.push(["https://fonts.googleapis.com",!1]),preconnects.push(["https://fonts.gstatic.com",!0]),styles.push(["https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap&subset=latin-ext",!0]),c&&scripts.push(`${moneyInitBaseUrl}/assets-new/js/manifest.js`),preconnects.forEach((e=>{loadPreconnect(...e)})),scripts.forEach((e=>{promises.push(loadScript(e))})),styles.forEach((e=>{promises.push(loadStyle(...e))})),Promise.all(promises).then((()=>{window.addEventListener("scroll",moneyWidgetWrapperAppeared,{passive:!0}),moneyWidgetWrapperAppeared()})).catch((e=>{console.log(e)}))}window.getAdOceanParams=function(){return(document.location.href.split("#")[1]||"").split("&").reduce(((e,n)=>{const t=n.split("=");return e[t[0]]=decodeURIComponent(t.slice(1).join("=")),e}),{})},document.addEventListener("DOMContentLoaded",loadMoneyCalculatorWidgetAssets,{once:!0,passive:!0});
